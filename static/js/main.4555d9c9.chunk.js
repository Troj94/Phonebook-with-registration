(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{102:function(e,t,n){},103:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(24),c=n.n(a),u=n(15),o=n(4),i=n(20),s=n(27),d=n(19),l=n(2),f=["children","redirectTo"];var p=function(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/login":n,a=Object(s.a)(e,f),c=Object(u.c)(d.b);return Object(l.jsx)(o.b,Object(i.a)(Object(i.a)({},a),{},{children:c?t:Object(l.jsx)(o.a,{to:r})}))},b=["children","restricted","redirectTo"];var h=function(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,a=e.redirectTo,c=void 0===a?"/":a,f=Object(s.a)(e,b),p=Object(u.c)(d.b)&&r;return Object(l.jsx)(o.b,Object(i.a)(Object(i.a)({},f),{},{children:p?Object(l.jsx)(o.a,{to:c}):t}))},j=n(5),O=n(42),g=(n(98),Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,117))}))),v=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,118))})),m=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,116))})),x=function(){var e=Object(u.c)(d.c),t=Object(u.b)(),n=Object(r.useRef)(!0),a=Object(u.c)(d.b);return Object(r.useEffect)((function(){n.current&&e&&(j.e.set(e),t(j.a(e)),n.current=!1)}),[t,e]),Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(r.Suspense,{fallback:Object(l.jsx)(O.a,{}),children:Object(l.jsxs)(o.d,{children:[Object(l.jsx)(h,{restricted:!0,path:"/login",children:Object(l.jsx)(g,{})}),Object(l.jsx)(h,{restricted:!0,path:"/register",children:Object(l.jsx)(v,{})}),Object(l.jsx)(p,{path:"/contacts",children:Object(l.jsx)(m,{})}),Object(l.jsx)(o.a,{to:a?"/contacts":"/login"})]})})})},y=n(50),k=n(7),C=n(18),w=n(48),L=n.n(w),V=n(44),W=Object(k.c)({name:"auth",initialState:{name:"",email:"",isLogged:!1,token:null,error:null,isLoading:!1},extraReducers:function(e){e.addCase(j.d.pending,(function(e){e.error=null})).addCase(j.d.fulfilled,(function(e,t){e.name=t.payload.data.user.name,e.email=t.payload.data.user.email,e.token=t.payload.data.token})).addCase(j.d.rejected,(function(e,t){e.error=t.payload,e.name="",e.email="",e.token=null,e.isLogged=!0})).addCase(j.b.pending,(function(e){e.name="",e.email="",e.token=null,e.error=null})).addCase(j.b.fulfilled,(function(e,t){e.name=t.payload.data.user.name,e.email=t.payload.data.user.email,e.token=t.payload.data.token,e.isLogged=!0})).addCase(j.b.rejected,(function(e,t){e.error=t.payload,e.name="",e.email="",e.token=null})).addCase(j.c.pending,(function(e){e.error=null})).addCase(j.c.fulfilled,(function(e){e.name="",e.email="",e.token=null,e.isLogged=!1})).addCase(j.c.rejected,(function(e,t){e.error=t.payload})).addCase(j.a.pending,(function(e){e.isLoading=!0})).addCase(j.a.fulfilled,(function(e,t){e.name=t.payload.data.name,e.email=t.payload.data.email,e.isLogged=!0,e.isLoading=!1})).addCase(j.a.rejected,(function(e,t){e.error=t.payload,e.isLoading=!1}))}}).reducer,z={key:"root",storage:L.a,whitelist:["token"]},T=Object(k.a)({reducer:{auth:Object(C.g)(z,W),phonebook:V.b},devTools:!1,middleware:function(e){return Object(y.a)(e({serializableCheck:{ignoredActions:[C.a,C.f,C.b,C.c,C.d,C.e,"auth/registration/fulfilled","auth/registration/rejected","auth/login/fulfilled","auth/login/rejected","auth/refresh/fulfilled","auth/refresh/rejected","auth/getCurrentUser/fulfilled"]}}))}}),A=Object(C.h)(T),R=(n(101),n(102),n(21)),S=n(49);c.a.render(Object(l.jsx)(u.a,{store:T,children:Object(l.jsx)(S.a,{loading:null,persistor:A,children:Object(l.jsx)(R.a,{children:Object(l.jsx)(x,{})})})}),document.getElementById("root"))},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return l}));var r=n(6),a=n.n(r),c=n(17),u=n(7),o=n(14),i=n.n(o),s=Object(u.b)("fetchAddContact",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/contacts",t);case 4:return c=e.sent,u=c.data,e.abrupt("return",u);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),d=Object(u.b)("fetchContacts",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i()("/contacts");case 4:return c=e.sent,u=c.data,e.abrupt("return",u);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),l=Object(u.b)("fetchDeleteContact",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.delete("/contacts/".concat(t));case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}())},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return o}));var r=function(e){return e.auth.error},a=function(e){return e.auth.name},c=function(e){return e.auth.email},u=function(e){return e.auth.token},o=function(e){return e.auth.isLogged}},42:function(e,t,n){"use strict";var r=n(47),a=n.n(r),c=n(2);t.a=function(){return Object(c.jsx)(a.a,{type:"ThreeDots",color:"#3f51b5",height:38,width:70})}},44:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(7),a=n(16),c=n(5),u=Object(r.c)({name:"phonebook",initialState:{filter:"",contacts:[],error:null},reducers:{changeFilter:function(e,t){e.filter=t.payload}},extraReducers:function(e){e.addCase(a.a.pending,(function(e){e.error=null})).addCase(a.a.fulfilled,(function(e,t){e.contacts.push(t.payload)})).addCase(a.a.rejected,(function(e,t){e.error=t.payload})).addCase(a.b.pending,(function(e){e.error=null})).addCase(a.b.fulfilled,(function(e,t){e.contacts=t.payload})).addCase(a.b.rejected,(function(e,t){e.error=t.payload})).addCase(a.c.pending,(function(e){e.error=null})).addCase(a.c.fulfilled,(function(e,t){e.contacts=e.contacts.filter((function(e){return e.id!==t.payload}))})).addCase(a.c.rejected,(function(e,t){e.error=t.payload})).addCase(c.c.fulfilled,(function(e){e.contacts=[],e.filter="",e.error=null}))}}),o=u.reducer,i=u.actions.changeFilter},5:function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return h}));var r=n(6),a=n.n(r),c=n(17),u=n(7),o=n(14),i=n.n(o),s=n(31),d=n.n(s);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var l={set:function(e){i.a.defaults.headers.common.Authorization="Bearer ".concat(e)},unset:function(){i.a.defaults.headers.common.Authorization=""}},f=Object(u.b)("auth/registration",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/signup",t);case 4:return c=e.sent,l.set(c.data.token),e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),d.a.Notify.failure("Something wrong, try again"),e.abrupt("return",r(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),p=Object(u.b)("auth/login",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/login",t);case 4:return c=e.sent,l.set(c.data.token),e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),b=Object(u.b)("auth/logout",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/users/logout");case 4:l.unset(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),h=Object(u.b)("auth/getCurrentUser",function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.get("/users/current",t);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",r(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}())},98:function(e,t,n){}},[[103,2,3]]]);
//# sourceMappingURL=main.4555d9c9.chunk.js.map