{"version":3,"sources":["components/PrivateRoute.jsx","components/PublicRoute.jsx","App.jsx","redux/auth/auth-reducer.js","redux/store.js","index.js","redux/phonebook/phonebook-operations.js","redux/auth/auth-selectors.js","components/Loader/Loader.jsx","redux/phonebook/phonebook-reducer.js","redux/auth/auth-operations.js"],"names":["PrivateRoute","children","redirectTo","routeProps","isLogged","useSelector","authSelectors","to","PublicRoute","restricted","shouldRedirect","LoginView","lazy","RegistrationView","ContactsView","App","tokenExisting","dispatch","useDispatch","isFirstLoadApp","useRef","useEffect","current","authOperations","set","className","fallback","path","authReducer","createSlice","name","initialState","email","token","error","isLoading","extraReducers","builder","addCase","registration","pending","state","fulfilled","action","payload","data","user","rejected","login","logout","getCurrentUser","reducer","persistConfig","key","storage","whitelist","store","configureStore","auth","persistReducer","phonebook","phonebookReducer","devTools","process","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","persistor","persistStore","ReactDOM","render","loading","document","getElementById","fetchAddContact","createAsyncThunk","newContact","a","rejectWithValue","axios","post","fetchContacts","_","fetchDeleteContact","contactId","delete","getError","getUserName","getUserEmail","getToken","getIsLogged","Spinner","type","color","height","width","phonebookSlice","filter","contacts","reducers","changeFilter","actions","push","contact","id","defaults","baseURL","headers","common","Authorization","unset","newUser","Notiflix","Notify","failure","get"],"mappings":"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","file":"static/js/main.a0c7a7ee.chunk.js","sourcesContent":["import { useSelector } from 'react-redux';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport * as authSelectors from 'redux/auth/auth-selectors';\r\n\r\nfunction PrivateRoute({ children, redirectTo = '/login', ...routeProps }) {\r\n  const isLogged = useSelector(authSelectors.getIsLogged);\r\n\r\n  return (\r\n    <Route {...routeProps}>\r\n      {isLogged ? children : <Redirect to={redirectTo} />}\r\n    </Route>\r\n  );\r\n}\r\n\r\nexport default PrivateRoute;\r\n","import { useSelector } from 'react-redux';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport * as authSelectors from 'redux/auth/auth-selectors';\r\n\r\nfunction PublicRoute({\r\n  children,\r\n  restricted = false,\r\n  redirectTo = '/',\r\n  ...routeProps\r\n}) {\r\n  const isLogged = useSelector(authSelectors.getIsLogged);\r\n\r\n  const shouldRedirect = isLogged && restricted;\r\n\r\n  return (\r\n    <Route {...routeProps}>\r\n      {shouldRedirect ? <Redirect to={redirectTo} /> : children}\r\n    </Route>\r\n  );\r\n}\r\n\r\nexport default PublicRoute;\r\n","import { lazy, Suspense, useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Redirect, Switch } from 'react-router-dom';\r\nimport PrivateRoute from './components/PrivateRoute';\r\nimport PublicRoute from './components/PublicRoute';\r\nimport * as authOperations from 'redux/auth/auth-operations';\r\nimport * as authSelectors from 'redux/auth/auth-selectors';\r\nimport Spinner from 'components/Loader/Loader';\r\n\r\nimport './App.css';\r\n\r\nconst LoginView = lazy(() => import('views/LoginView/LoginView'));\r\nconst RegistrationView = lazy(() =>\r\n  import('views/RegistrationView/RegistrationView'),\r\n);\r\nconst ContactsView = lazy(() => import('views/ContactsView/ContactsView'));\r\n\r\nconst App = () => {\r\n  const tokenExisting = useSelector(authSelectors.getToken);\r\n  const dispatch = useDispatch();\r\n  const isFirstLoadApp = useRef(true);\r\n  const isLogged = useSelector(authSelectors.getIsLogged);\r\n\r\n  useEffect(() => {\r\n    if (!isFirstLoadApp.current) return;\r\n    if (!tokenExisting) return;\r\n\r\n    authOperations.token.set(tokenExisting);\r\n    dispatch(authOperations.getCurrentUser(tokenExisting));\r\n\r\n    isFirstLoadApp.current = false;\r\n  }, [dispatch, tokenExisting]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Suspense fallback={<Spinner />}>\r\n        <Switch>\r\n          <PublicRoute restricted path=\"/login\">\r\n            <LoginView />\r\n          </PublicRoute>\r\n          <PublicRoute restricted path=\"/register\">\r\n            <RegistrationView />\r\n          </PublicRoute>\r\n          <PrivateRoute path=\"/contacts\">\r\n            <ContactsView />\r\n          </PrivateRoute>\r\n          <Redirect to={isLogged ? '/contacts' : '/login'} />\r\n        </Switch>\r\n      </Suspense>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport { login, logout, getCurrentUser, registration } from './auth-operations';\r\n\r\nconst initialState = {\r\n  name: '',\r\n  email: '',\r\n  isLogged: false,\r\n  token: null,\r\n  error: null,\r\n  isLoading: false,\r\n};\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  extraReducers: builder => {\r\n    builder\r\n      .addCase(registration.pending, state => {\r\n        state.error = null;\r\n      })\r\n      .addCase(registration.fulfilled, (state, action) => {\r\n        state.name = action.payload.data.user.name;\r\n        state.email = action.payload.data.user.email;\r\n        state.token = action.payload.data.token;\r\n      })\r\n      .addCase(registration.rejected, (state, action) => {\r\n        state.error = action.payload;\r\n        state.name = '';\r\n        state.email = '';\r\n        state.token = null;\r\n        state.isLogged = true;\r\n      })\r\n      .addCase(login.pending, state => {\r\n        state.name = '';\r\n        state.email = '';\r\n        state.token = null;\r\n        state.error = null;\r\n      })\r\n      .addCase(login.fulfilled, (state, action) => {\r\n        state.name = action.payload.data.user.name;\r\n        state.email = action.payload.data.user.email;\r\n        state.token = action.payload.data.token;\r\n        state.isLogged = true;\r\n      })\r\n      .addCase(login.rejected, (state, action) => {\r\n        state.error = action.payload;\r\n        state.name = '';\r\n        state.email = '';\r\n        state.token = null;\r\n      })\r\n      .addCase(logout.pending, state => {\r\n        state.error = null;\r\n      })\r\n      .addCase(logout.fulfilled, state => {\r\n        state.name = '';\r\n        state.email = '';\r\n        state.token = null;\r\n        state.isLogged = false;\r\n      })\r\n      .addCase(logout.rejected, (state, action) => {\r\n        state.error = action.payload;\r\n      })\r\n      .addCase(getCurrentUser.pending, state => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(getCurrentUser.fulfilled, (state, action) => {\r\n        state.name = action.payload.data.name;\r\n        state.email = action.payload.data.email;\r\n        state.isLogged = true;\r\n        state.isLoading = false;\r\n      })\r\n      .addCase(getCurrentUser.rejected, (state, action) => {\r\n        state.error = action.payload;\r\n        state.isLoading = false;\r\n      });\r\n  },\r\n});\r\n\r\nexport const authReducer = authSlice.reducer;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport {\r\n  persistStore,\r\n  persistReducer,\r\n  FLUSH,\r\n  REHYDRATE,\r\n  PAUSE,\r\n  PERSIST,\r\n  PURGE,\r\n  REGISTER,\r\n} from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport * as phonebookReducer from 'redux/phonebook/phonebook-reducer';\r\nimport * as authReducer from 'redux/auth/auth-reducer';\r\n\r\nconst middleware = getDefaultMiddleware => {\r\n  return [\r\n    ...getDefaultMiddleware({\r\n      serializableCheck: {\r\n        ignoredActions: [\r\n          FLUSH,\r\n          REHYDRATE,\r\n          PAUSE,\r\n          PERSIST,\r\n          PURGE,\r\n          REGISTER,\r\n          'auth/registration/fulfilled',\r\n          'auth/registration/rejected',\r\n          'auth/login/fulfilled',\r\n          'auth/login/rejected',\r\n          'auth/refresh/fulfilled',\r\n          'auth/refresh/rejected',\r\n          'auth/getCurrentUser/fulfilled',\r\n        ],\r\n      },\r\n    }),\r\n  ];\r\n};\r\n\r\nconst persistConfig = {\r\n  key: 'root',\r\n  storage,\r\n  whitelist: ['token'],\r\n};\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    auth: persistReducer(persistConfig, authReducer.authReducer),\r\n    phonebook: phonebookReducer.phonebookReducer,\r\n  },\r\n  devTools: process.env.NODE_ENV === 'development',\r\n  middleware,\r\n});\r\n\r\nexport const persistor = persistStore(store);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport App from './App';\r\nimport { persistor, store } from './redux/store';\r\nimport 'modern-normalize/modern-normalize.css';\r\nimport './index.css';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <PersistGate loading={null} persistor={persistor}>\r\n      <BrowserRouter>\r\n        <App />\r\n      </BrowserRouter>\r\n    </PersistGate>\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\n","import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\nexport const fetchAddContact = createAsyncThunk(\r\n  'fetchAddContact',\r\n  async (newContact, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await axios.post('/contacts', newContact);\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const fetchContacts = createAsyncThunk(\r\n  'fetchContacts',\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const { data } = await axios('/contacts');\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const fetchDeleteContact = createAsyncThunk(\r\n  'fetchDeleteContact',\r\n  async (contactId, { rejectWithValue }) => {\r\n    try {\r\n      await axios.delete(`/contacts/${contactId}`);\r\n\r\n      return contactId;\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n","export const getError = state => state.auth.error;\r\nexport const getUserName = state => state.auth.name;\r\nexport const getUserEmail = state => state.auth.email;\r\nexport const getToken = state => state.auth.token;\r\nexport const getIsLogged = state => state.auth.isLogged;\r\nexport const getIsLoading = state => state.auth.isLoading;\r\n","import Loader from 'react-loader-spinner';\r\n\r\nfunction Spinner() {\r\n  return <Loader type=\"ThreeDots\" color=\"#3f51b5\" height={38} width={70} />;\r\n}\r\n\r\nexport default Spinner;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\nimport {\r\n  fetchAddContact,\r\n  fetchContacts,\r\n  fetchDeleteContact,\r\n} from './phonebook-operations';\r\nimport * as authOperations from 'redux/auth/auth-operations';\r\n\r\nconst initialState = {\r\n  filter: '',\r\n  contacts: [],\r\n  error: null,\r\n};\r\n\r\nconst phonebookSlice = createSlice({\r\n  name: 'phonebook',\r\n  initialState,\r\n  reducers: {\r\n    changeFilter(state, actions) {\r\n      state.filter = actions.payload;\r\n    },\r\n  },\r\n  extraReducers: builder => {\r\n    builder\r\n      .addCase(fetchAddContact.pending, state => {\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchAddContact.fulfilled, (state, action) => {\r\n        state.contacts.push(action.payload);\r\n      })\r\n      .addCase(fetchAddContact.rejected, (state, action) => {\r\n        state.error = action.payload;\r\n      })\r\n      .addCase(fetchContacts.pending, state => {\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchContacts.fulfilled, (state, action) => {\r\n        state.contacts = action.payload;\r\n      })\r\n      .addCase(fetchContacts.rejected, (state, action) => {\r\n        state.error = action.payload;\r\n      })\r\n      .addCase(fetchDeleteContact.pending, state => {\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchDeleteContact.fulfilled, (state, action) => {\r\n        state.contacts = state.contacts.filter(\r\n          contact => contact.id !== action.payload,\r\n        );\r\n      })\r\n      .addCase(fetchDeleteContact.rejected, (state, action) => {\r\n        state.error = action.payload;\r\n      })\r\n      .addCase(authOperations.logout.fulfilled, state => {\r\n        state.contacts = [];\r\n        state.filter = '';\r\n        state.error = null;\r\n      });\r\n  },\r\n});\r\n\r\nexport const phonebookReducer = phonebookSlice.reducer;\r\nexport const { changeFilter } = phonebookSlice.actions;\r\n","import { createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nimport Notiflix from 'notiflix';\r\n\r\naxios.defaults.baseURL = 'https://connections-api.herokuapp.com';\r\n\r\nexport const token = {\r\n  set(token) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = '';\r\n  },\r\n};\r\n\r\nexport const registration = createAsyncThunk(\r\n  'auth/registration',\r\n  async (newUser, { rejectWithValue }) => {\r\n    try {\r\n      const data = await axios.post('/users/signup', newUser);\r\n      token.set(data.data.token);\r\n      return data;\r\n    } catch (error) {\r\n      Notiflix.Notify.failure('Something wrong, try again');\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const login = createAsyncThunk(\r\n  'auth/login',\r\n  async (user, { rejectWithValue }) => {\r\n    try {\r\n      const data = await axios.post('/users/login', user);\r\n      token.set(data.data.token);\r\n      return data;\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const logout = createAsyncThunk(\r\n  'auth/logout',\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      await axios.post('/users/logout');\r\n      token.unset();\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n\r\nexport const getCurrentUser = createAsyncThunk(\r\n  'auth/getCurrentUser',\r\n  async (user, { rejectWithValue }) => {\r\n    try {\r\n      return await axios.get('/users/current', user);\r\n    } catch (error) {\r\n      return rejectWithValue(error);\r\n    }\r\n  },\r\n);\r\n"],"sourceRoot":""}